
@{
    ViewBag.Title = "Index";
    Layout = "~/Views/Boss.cshtml";
}

<script src="~/Scripts/jquery-3.3.1.js"></script>
<script src="~/layui-v2.4.5/layui/layui.js"></script>
<link href="~/layui-v2.4.5/layui/css/layui.css" rel="stylesheet" />
<div>
    <table id="table" class="layui-table">
        <thead>
            <tr>
                <td>订单编号</td>
                <td>购买数量</td>
                <td>售出时间</td>
                <td>名称</td>
                <td>颜色</td>
                <td>图片</td>
            </tr>
        </thead>
        <thead id="G_xian">
        </thead>
    </table>
    <div id="demo7"></div>
</div>
<script>
    layui.use(['laypage', 'layer'], function () {
        var laypage = layui.laypage
            , layer = layui.layer;
        $.ajax({
            url: "http://localhost:55237/api/Employees/ShowMarket",
            type: 'get',
            dataType: 'Json',
            success: function (data) {
                $("#Goods_xian").empty();// 清空TBODY的内容，重新加载
                for (var i in data) {
                    //完整功能
                    laypage.render({
                        elem: 'demo7'
                        , count: data.length

                        , layout: ['count', 'prev', 'page', 'next', 'refresh', 'skip']
                        , limit:5
                        , jump: function (obj) {
                            document.getElementById('G_xian').innerHTML = function () {
                                var arr = []
                                    , thisData = data.concat().splice(obj.curr * obj.limit - obj.limit, obj.limit);
                                layui.each(thisData, function (index, item) {
                                    arr.push('<tr><td>' + item.MCard + '</td><td>' + item.MNnum + '</td><td>' + item.MTime + '</td><td>' + item.GName + '</td><td>' + item.GColor + '</td><td><img height="80" width="300" src=' + item.GPicture + ' alt=' + item.GName + ' /></td></tr >');
                                });
                                return arr.join('');
                            }();
                        }
                    });
                }

            }
        })
    });
</script>







@*<!DOCTYPE html>

<html>
<head>
    <meta name="viewport" content="width=device-width" />
    <link href="~/layui/css/layui.css" rel="stylesheet" />
    <script src="~/layui-v2.4.5/layui/layui.js"></script>
    <script src="~/Scripts/jquery-3.3.1.js"></script>
    <title>显示</title>
</head>
<body>
    <fieldset class="layui-elem-field layui-field-title" style="margin-top: 30px;">
        <legend>已销售商品</legend>
    </fieldset>

    <div class="layui-form">
        <input class="layui-icon-link" id="Text1" type="text" />
        <input class="layui-btn layui-btn-normal" id="Button1" type="button" value="查询" />
    </div>
    <div style="width:1200px;">
        <table class="layui-table">
            <thead>
                <tr>
                    <td>订单编号</td>
                    <td>购买数量</td>
                    <td>售出时间</td>
                    <td>名称</td>
                    <td>颜色</td>
                    <td>图片</td>
                </tr>
            </thead>
            <tbody id="biao"></tbody>
        </table>
        <div id="demo7"></div>
    </div>

    <fieldset class="layui-elem-field layui-field-title" style="margin-top: 30px;">
        <legend>显示完整功能</legend>
    </fieldset>

    <div id="demo8"></div>

</body>
</html>
<script>
    xian();
    alert($("#pagecount").val());
    layui.use(['laypage', 'layer'], function () {
        var laypage = layui.laypage
            , layer = layui.layer
        laypage.render({
            elem: ''
            , count: data.length
            , jump: function (obj) {
                //模拟渲染
                document.getElementById('biuuu_city_list').innerHTML = function () {
                    var arr = []
                        , thisData = data.concat().splice(obj.curr * obj.limit - obj.limit, obj.limit);
                    layui.each(thisData, function (index, item) {
                        arr.push('<li>' + item + '</li>');
                    });
                    return arr.join('');
                }();
            }
        });
        //完整功能
        laypage.render({
            elem: 'demo8'
            , count: 100
            , layout: ['count', 'prev', 'page', 'next', 'limit', 'refresh', 'skip']
            , jump: function (obj) {
                console.log(obj)
            }
        });

    });
    function xian() {
        $.ajax({
            url: "http://localhost:55237/api/Employees/ShowMarket",
            type: 'get',
            dataType: 'Json',
            success: function (data) {
                $("#biao").empty();
                for (var i in data) {
                    $("#biao").append("<tr><td>" + data[i].MCard + "</td><td>" + data[i].MNnum + "</td><td>" + data[i].MTime + "</td><td>" + data[i].GName + "</td><td>" + data[i].GColor + "</td><td>" + data[i].GPicture + "</td></tr >");
                }
            }
        })
    }
</script>*@


